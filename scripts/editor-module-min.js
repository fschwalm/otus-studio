!function(t){"use strict";var e=t.module("angular-bind-html-compile",[]);e.directive("bindHtmlCompile",["$compile",function(t){return{restrict:"A",link:function(e,n,i){e.$watch(function(){return e.$eval(i.bindHtmlCompile)},function(r){n.html(r&&r.toString());var o=e;i.bindHtmlScope&&(o=e.$eval(i.bindHtmlScope)),t(n.contents())(o)})}}}])}(window.angular),function(){"use strict";angular.module("editor",["editor.core","editor.database","editor.ui","editor.workspace"])}(),function(){"use strict";function t(t){function e(e){t.initializeWorkspace({owner:"visitor"}),t.startNewWork(e)}function n(e){t.initializeWorkspace({owner:"visitor"}),t.loadWork(e)}var i=this;i.startEditor=e,i.startEditorWithSurveyTemplate=n}angular.module("editor").service("SurveyEditorService",t),t.$inject=["WorkspaceService"]}(),function(){"use strict";angular.module("editor.core",[])}(),function(){"use strict";function t(t,n){function i(){return new e(t,n)}var r=this;return r.create=i,r}function e(t,e){function n(n){var r=t.execute(n.getItem());return e.workspace.isdb.userEdits.store(i),e.saveWork(),r}var i=this;i.execute=n}angular.module("editor.core").factory("AddAnswerOptionEventFactory",t),t.$inject=["AddAnswerOptionService","WorkspaceService"]}(),function(){"use strict";function t(t,n){function i(){return new e(t,n)}var r=this;return r.create=i,r}function e(t,e){function n(n){var r=t.execute(n.getItem());return e.workspace.isdb.userEdits.store(i),e.saveWork(),r}var i=this;i.execute=n}angular.module("editor.core").factory("AddMetadataAnswerEventFactory",t),t.$inject=["AddMetadataAnswerService","WorkspaceService"]}(),function(){"use strict";function t(t,n){function i(){return new e(t,n)}var r=this;return r.create=i,r}function e(t,e){function n(n){var r=t.execute(n);return e.workspace.isdb.userEdits.store(i),e.saveWork(),r}var i=this;i.execute=n}angular.module("editor.core").factory("AddRouteEventFactory",t),t.$inject=["AddRouteService","WorkspaceService"]}(),function(){"use strict";function t(t,n){function i(){return new e(t,n)}var r=this;return r.create=i,r}function e(t,e){function n(n,r){var o=t.execute(n,r);return e.workspace.isdb.userEdits.store(i),e.saveWork(),o}var i=this;i.execute=n}angular.module("editor.core").factory("AddRouteConditionEventFactory",t),t.$inject=["AddRouteConditionService","WorkspaceService"]}(),function(){"use strict";function t(t,n){function i(){return new e(t,n)}var r=this;return r.create=i,r}function e(t,e){function n(n,r){var o=t.execute(n,r);return e.workspace.isdb.userEdits.store(i),e.saveWork(),o}var i=this;i.execute=n}angular.module("editor.core").factory("AddRuleEventFactory",t),t.$inject=["AddRuleService","WorkspaceService"]}(),function(){"use strict";function t(t,n,i,r,o,a,u){function c(){return new e(t,n,i,r,o,a,u)}var s=this;return s.create=c,s}function e(t,e,n,i,r,o,a){function u(n){var o=r.execute(n,e.getSurvey());i.loadQuestion(o),t.$broadcast("item.add",o),e.workspace.currentItem=o,e.workspace.isdb.userEdits.store(s),e.saveWork()}function c(n){var o=r.execute(n.objectType,e.getSurvey());n.customID?o.customID=n.customID:o.customID=o.templateID,o.isQuestion()?(o.label=n.label,o.metadata.options=n.metadata.options,o.fillingRules.options=n.fillingRules.options,"SingleSelectionQuestion"!==n.objectType&&"CheckboxQuestion"!==n.objectType||(o.options=n.options),"DecimalQuestion"!==n.objectType&&"IntegerQuestion"!==n.objectType||(o.unit=n.unit)):"ImageItem"===n.objectType?(o.url=n.url,o.footer=n.footer):o.value=n.value,i.loadQuestion(o),t.$broadcast("item.add",o),e.workspace.currentItem=o}var s=this;s.execute=u,s.load=c}angular.module("editor.core").factory("AddSurveyItemEventFactory",t),t.$inject=["$rootScope","WorkspaceService","WidgetService","SheetContentService","AddSurveyItemService","PageAnchorService","$timeout"]}(),function(){"use strict";function t(t,n){function i(){return new e(t,n)}var r=this;return r.create=i,r}function e(t,e){function n(n,r){var o=t.execute(n,r);return e.workspace.isdb.userEdits.store(i),e.saveWork(),o}var i=this;i.execute=n}angular.module("editor.core").factory("AddFillingRulesEventFactory",t),t.$inject=["AddFillingRulesService","WorkspaceService"]}(),function(){"use strict";function t(t,n){function i(){return new e(t,n)}var r=this;return r.create=i,r}function e(t,e){function n(n){t.execute(n.getItem()),e.workspace.isdb.userEdits.store(i),e.saveWork()}var i=this;i.execute=n}angular.module("editor.core").factory("RemoveAnswerOptionEventFactory",t),t.$inject=["RemoveAnswerOptionService","WorkspaceService"]}(),function(){"use strict";function t(t,n){function i(){return new e(t,n)}var r=this;return r.create=i,r}function e(t,e){function n(n,r){t.execute(n.getItem(),r),e.workspace.isdb.userEdits.store(i),e.saveWork()}var i=this;i.execute=n}angular.module("editor.core").factory("RemoveFillingRulesEventFactory",t),t.$inject=["RemoveFillingRulesWorkService","WorkspaceService"]}(),function(){"use strict";function t(t,n){function i(){return new e(t,n)}var r=this;return r.create=i,r}function e(t,e){function n(n){t.execute(n.getItem()),e.workspace.isdb.userEdits.store(i),e.saveWork()}var i=this;i.execute=n}angular.module("editor.core").factory("RemoveMetadataOptionEventFactory",t),t.$inject=["RemoveMetadataOptionService","WorkspaceService"]}(),function(){"use strict";function t(t,n){function i(){return new e(t,n)}var r=this;return r.create=i,r}function e(t,e){function n(n){t.execute(n),e.workspace.isdb.userEdits.store(i),e.saveWork()}var i=this;i.execute=n}angular.module("editor.core").factory("RemoveRouteEventFactory",t),t.$inject=["RemoveRouteService","WorkspaceService"]}(),function(){"use strict";function t(t,n){function i(){return new e(t,n)}var r=this;return r.create=i,r}function e(t,e){function n(n,r){t.execute(n,r),e.workspace.isdb.userEdits.store(i),e.saveWork()}var i=this;i.execute=n}angular.module("editor.core").factory("RemoveRuleEventFactory",t),t.$inject=["RemoveRuleService","WorkspaceService"]}(),function(){"use strict";function t(t,n,i){function r(){return new e(t,n,i)}var o=this;return o.create=r,o}function e(t,e,n){function i(i){n.execute(i,e.getSurvey()),t.$broadcast("item.remove."+i.templateID,i),e.workspace.isdb.userEdits.store(r),e.saveWork()}var r=this;r.execute=i}angular.module("editor.core").factory("RemoveSurveyItemEventFactory",t),t.$inject=["$rootScope","WorkspaceService","RemoveSurveyItemService"]}(),function(){"use strict";function t(t){function n(){return new e(t)}var i=this;return i.create=n,i}function e(t){function e(){t.workspace.isdb.userEdits.store(n),t.saveWork()}var n=this;n.execute=e}angular.module("editor.core").factory("UpdateFillingRulesEventFactory",t),t.$inject=["WorkspaceService"]}(),function(){"use strict";function t(t){function n(){return new e(t)}var i=this;return i.create=n,i}function e(t){function e(e){t.workspace.isdb.userEdits.store(n),t.saveWork()}var n=this;n.execute=e}angular.module("editor.core").factory("UpdateQuestionEventFactory",t),t.$inject=["WorkspaceService"]}(),function(){"use strict";function t(t){function n(){return new e(t)}var i=this;return i.create=n,i}function e(t){function e(e){t.workspace.isdb.userEdits.store(n),t.saveWork()}var n=this;n.execute=e}angular.module("editor.core").factory("UpdateRouteEventFactory",t),t.$inject=["WorkspaceService"]}(),function(){"use strict";function t(t){function n(){return new e(t)}var i=this;return i.create=n,i}function e(t){function e(e){t.workspace.isdb.userEdits.store(n),t.saveWork()}var n=this;n.execute=e}angular.module("editor.core").factory("UpdateRuleEventFactory",t),t.$inject=["WorkspaceService"]}(),function(){"use strict";function t(t){t.connection("otus-studio").upgradeDatabase(1,function(t,e,n){var i=e.createObjectStore("survey_template",{keyPath:"template_oid"});i.createIndex("contributor_idx","contributor",{unique:!1})})}angular.module("editor.database",[]).config(t),t.$inject=["$indexedDBProvider"]}(),function(){"use strict";function t(t,e,n){function i(t,n){e.openStore(l,function(e){var i={};i.template_oid=t.oid,i.contributor=n.owner,i.template=JSON.parse(t.toJson()),e.upsert(i).then(function(t){})})}function r(n,i){var r=t.defer();return e.openStore(l,function(t){var e=JSON.parse(n),o={};o.template_oid=e.oid,o.contributor=i.owner,o.template=e,t.insert(o).then(function(t){r.resolve(t)},function(t){r.reject(t)})}),r.promise}function o(){var n=t.defer();return e.openStore(l,function(t){t.getAll().then(function(t){n.resolve(t)})}),n.promise}function a(){var n=t.defer();return e.openStore(l,function(t){var e=t.query();e=e.$eq("visitor"),e=e.$index(d),t.eachWhere(e).then(function(t){n.resolve(t)})}),n.promise}function u(n){var i=t.defer();return e.openStore(l,function(t){t["delete"](n).then(function(){i.resolve(!0)})}),i.promise}function c(n){var i=t.defer();return e.openStore(l,function(t){t.find(n).then(function(t){i.resolve(t)})}),i.promise}var s=this,l="survey_template",d="contributor_idx";s.saveSurveyTemplateRevision=i,s.getAllSurveyTemplates=o,s.getAllSurveyTemplatesByContributor=a,s.deleteSurveyTemplate=u,s.insertSurveyTemplate=r,s.findSurveyTemplateByOID=c}angular.module("editor.database").service("CrossSessionDatabaseService",t),t.$inject=["$q","$indexedDB","InsertHelperService"]}(),function(){"use strict";function t(){function t(t){var e={};return Object.keys(t).forEach(function(n){var i=t[n];i instanceof Function&&(e[n]=i)}),e}var e=this;e.cloneObject=t}angular.module("editor.database").service("InsertHelperService",t)}(),function(){"use strict";function t(t){function n(){return new e(t)}var i=this;return i.create=n,i}function e(t){function e(){r=new t("in-session-db.json"),i[o]=new n(r.addCollection(o)),i[a]=new n(r.addCollection(a))}var i=this,r=null,o="userEdits",a="dataPool";e()}function n(t){function e(){Object.defineProperty(s,"collection",{value:t,writable:!1})}function n(t){s.collection.insert(t)}function i(t){var e=r("id",t.source.id);e?(u(e),n(t)):s.collection.insert(t)}function r(t,e){var n=s.collection.chain().where(function(n){return c(t,n)===e}).simplesort("$loki","isdesc").data();return n}function o(){var t=s.collection.chain().where(function(t){return t.type.isSelectData()}).simplesort("$loki","isdesc").data();return t[0]}function a(){var t=s.collection.chain().simplesort("$loki","isdesc").data();return t[0]}function u(t){s.collection.remove(t)}function c(t,e){var n=t.split("."),i=e;return n.forEach(function(t){i=i[t]}),i}var s=this;s.store=n,s.fetchEventBy=r,s.fetchLastSelectEvent=o,s.fetchLastAddedData=a,s.storeUnique=i,e()}angular.module("editor.database").factory("InSessionDatabaseFactory",t),t.$inject=["Loki"]}(),function(){"use strict";angular.module("otus.textEdition",["mdColorPicker"])}(),function(){"use strict";function t(){var t={templateUrl:"app/shared/text-edition-menu/text-edition-menu-template.html",retrict:"E",controller:"otus.textEdition.TextEditionMenuController as controller"};return t}angular.module("otus.textEdition").directive("otusTextEditionMenu",t)}(),function(){"use strict";function t(t,e,n){function i(){return document.execCommand("bold",!1,null),!1}function r(){return document.execCommand("italic",!1,null),!1}function o(){return document.execCommand("underline",!1,null),!1}function a(){return document.execCommand("strikeThrough",!1,null),!1}function u(){var t=n.textColor;return document.execCommand("ForeColor",!1,t),!1}function c(){var t=n.backgroundColor;return document.execCommand("HiliteColor",!1,t),!1}function s(){return document.execCommand("justifyCenter",!1,null),!1}function l(){return document.execCommand("justifyFull",!1,null),!1}function d(){return document.execCommand("justifyLeft",!1,null),!1}function f(){return document.execCommand("justifyRight",!1,null),!1}function m(){return document.execCommand("removeFormat",!1,null),!1}function g(){e.show({templateUrl:"app/shared/text-edition-menu/color/color-picker-template.html",controller:"otus.textEdition.ColorController as controller",clickOutsideToClose:!0})}var p=this;p.bold=i,p.italic=r,p.underlined=o,p.strikeThrough=a,p.openColors=g,p.foreColor=u,p.hiliteColor=c,p.justifyCenter=s,p.justifyLeft=d,p.justifyRight=f,p.justifyFull=l,p.removeFormat=m}angular.module("otus.textEdition").controller("otus.textEdition.TextEditionMenuController",t),t.$inject=["$scope","$mdDialog","otus.textEdition.ColorContext"]}(),function(){"use strict";function t(t,e){function n(){o.currentBackgroundColor=t.backgroundColor,o.currentTextColor=t.textColor}function i(){e.cancel()}function r(){t.backgroundColor=o.currentBackgroundColor,t.textColor=o.currentTextColor,e.hide()}var o=this;o.select=r,o.cancel=i,n()}angular.module("otus.textEdition").controller("otus.textEdition.ColorController",t),t.$inject=["otus.textEdition.ColorContext","$mdDialog"]}(),function(){"use strict";function t(){var t=this;t.backgroundColor="#448aff",t.textColor="#737373"}angular.module("otus.textEdition").service("otus.textEdition.ColorContext",t)}(),function(){"use strict";angular.module("editor.ui",["angular-bind-html-compile"])}(),function(){"use strict";function t(t,e){var n=this;n.$onInit=function(){t.attr("tabindex",-1),e.anchorRegistry(t)}}angular.module("editor.ui").component("otusPageAnchor",{templateUrl:"app/editor/ui/page-anchor-item/page-anchor-template.html",controller:t,bindings:{id:"<"}}),t.$inject=["$element","PageAnchorService"]}(),function(){function t(){function t(t){o[t[0].id]=t}function e(t){var e=t.children().length;e>6?i():n()}function n(){o["top-anchor"]&&o["top-anchor"].focus()}function i(){o["bottom-anchor"]&&o["bottom-anchor"].focus()}var r=this,o={};r.sheetAutoFocus=e,r.anchorRegistry=t}angular.module("editor.ui").service("PageAnchorService",t)}(),function(){"use strict";function t(){function t(t){return r.concat("core/question/".concat(t).concat("/".concat(t.concat("-question-template.html"))))}function e(){return o}function n(){return a}var i=this,r="app/editor/ui/",o="app/editor/ui/core/survey-item-editor/survey-item-editor.html",a="app/editor/ui/core/metadata/metadata-question-template.html";i.getWidgetPath=t,i.getQuestionEditorWidgetPath=e,i.getMetadataWidgetPath=n}angular.module("editor.ui").service("editor.ui.mpath",t)}(),function(){"use strict";function t(){function t(t){t.$on("otusWidgetPreLoad",function(t){}),t.$on("otusWidgetBinding",function(t){})}var e=this;e.setScope=t}angular.module("editor.ui").service("UiBindingService",t)}(),function(){"use strict";function t(t,e,n,i,r,o){function a(n){var i=e.create(n);return i.template=t.getDirectiveTemplate(n.objectType),i}function u(e){var n=r.create(e);return n.template=t.getDirectiveTemplate("MetadataGroup"),n}function c(t){return n.create(t)}function s(t){return i.create(t)}function l(t){return o.create(t)}var d=this;d.widgetMap={},d.getWidgetForModel=a,d.getMetadataWidget=u,d.getSurveyItemEditorWidget=c,d.getQuestionAnswerOptionWidget=s,d.getMetadataAnswerOptionWidget=l}angular.module("editor.ui").service("WidgetService",t),t.$inject=["WidgetTemplateService","SurveyItemWidgetFactory","SurveyItemEditorWidgetFactory","AnswerOptionWidgetFactory","MetadataGroupWidgetFactory","MetadataOptionWidgetFactory"]}(),function(){"use strict";function t(){function t(t){return n[t]}var e=this,n={CalendarQuestion:"<calendar-question></calendar-question>",IntegerQuestion:"<integer-question></integer-question>",SingleSelectionQuestion:"<single-selection-question></single-selection-question>",TextQuestion:"<text-question></text-question>",TimeQuestion:"<time-question></time-question>",PhoneQuestion:"<phone-question></phone-question>",CheckboxQuestion:"<checkbox-question></checkbox-question>",MetadataGroup:"<metadata-question></metadata-question>"};e.getDirectiveTemplate=t}angular.module("editor.ui").service("WidgetTemplateService",t)}(),function(){"use strict";function t(t){var e=this;e.name="",e.acronym="",e.identity={},e.$onInit=function(){e.identity=t.getSurvey().identity,e.name=e.identity.name,e.acronym=e.identity.acronym}}angular.module("editor.ui").component("otusSurveyTemplateHeader",{templateUrl:"app/editor/ui/survey-template-header/survey-template-header-template.html",controller:t}),t.$inject=["WorkspaceService"]}(),function(){"use strict";function t(t,e,n,i){function r(t,e){l=t,d=e}function o(n){s.lastLoadedQuestion=n;var i=t.loadDirective("<otus:survey-item-editor></otus:survey-item-editor>",l),r=d.find("#sheet").append(i);e.sheetAutoFocus(r)}function a(n){s.lastLoadedQuestion=n;var i=t.loadDirective("<otus:page-item-editor></otus:page-item-editor>",l);d.find("#sheet").append(i),e.sheetAutoFocus(sheetTemplate)}function u(t){d.find('[question-target="'+t.templateID+'"]').remove()}function c(t){var e='[es-id="question-editor-'+t.templateID+'-label"]',n=UIUtils.jq(d.find(e)[0]);n.text(t.label.ptBR.plainText)}var s=this,l=null,d=null;s.init=r,s.loadQuestion=o,s.loadItem=a,s.unloadQuestion=u,s.updateQuestion=c}angular.module("editor.ui").service("SheetContentService",t),t.$inject=["TemplateLoaderService","PageAnchorService"]}(),function(){"use strict";function t(t,e,n,i,r,o,a){function u(){i.isLoadingMode()?(i.setScope(t),i.loadSurveyTemplate().then(function(t){i.isLoading=!1,r.getSurvey().NavigationManager.loadJsonData(t.navigationList),a.createActivity(r.getSurvey())})):o.sessionStorage.setItem("surveyTemplate_OID",r.getSurvey().oid)}var c=this;c.EditionPreviewService=i,n.init(t,e),u(),t.$on("$destroy",function(){r.closeWork(),o.sessionStorage.removeItem("surveyTemplate_OID")})}angular.module("editor.ui").controller("SheetController",t),t.$inject=["$scope","$element","SheetContentService","EditionPreviewService","WorkspaceService","$window","otusjs.model.activity.ActivityFacadeService"]}(),function(){"use strict";function t(){var t={restrict:"E",controller:"SheetController",controllerAs:"sheetController",templateUrl:"app/editor/ui/sheet/sheet.html"};return t}angular.module("editor.ui").directive("otusEditionSheet",t)}(),function(){"use strict";function t(t,e,n){function i(t,n,i){e(t).then(function(t){var e=o(t,n);i&&i(e)})}function r(e,n){return t(e)(n)}function o(e,n){return t(e)(n)}var a=this;a.load=i,a.loadDirective=r}angular.module("editor.ui").service("TemplateLoaderService",t),t.$inject=["$compile","$templateRequest","$templateCache"]}(),function(){"use strict";function t(t){var e={scope:{model:"=",disabled:"@"},templateUrl:"app/editor/ui/base/input-text/input-text.html",retrict:"E",link:function(e,n,i){e.widget=t.create(e,i,n,e.$parent.widget||e.$parent.$parent.childWidget)}};return e}angular.module("editor.ui").directive("otusInputText",t),t.$inject=["OtusInputTextWidgetFactory"]}(),function(){"use strict";function t(){function t(t,n,i,r){return new e(t,n,i,r)}var n=this;return n.create=t,n}function e(t,e,n,i){var r=this;r.className=r.constructor.name,r.css={},r.template={},r.event={},r.template.ariaLabel=e.ariaLabel||e.label,r.template.label=e.label,r.template.leftIcon=e.iconButton||e.leftIcon,r.template.rightIcon=e.rightIcon,r.template.hasLeftIcon=void 0!==r.template.leftIcon,r.template.hasRightIcon=void 0===e.iconButton&&void 0!==r.template.rightIcon,r.parent=i,r.modelReference=t.model,r.style=t.style,t.model instanceof Function?r.model=t.model():r.model=t.model,n.on("change",function(){r.modelReference instanceof Function?r.modelReference(r.model):r.modelReference=r.model})}angular.module("editor.ui").factory("OtusInputTextWidgetFactory",t)}(),function(){"use strict";function t(t){var e={scope:{click:"="},templateUrl:"app/editor/ui/base/button/button.html",retrict:"E",link:function(e,n,i){e.widget=t.create(e,i,e.$parent.widget)}};return e}angular.module("editor.ui").directive("otusButton",t),t.$inject=["OtusButtonWidgetFactory"]}(),function(){"use strict";function t(){function t(t,n,i){return new e(t,n,i)}var n=this;return n.create=t,n}function e(t,e,n){var i=this,r=["top","bottom","left","right"];i.className=i.constructor.name,i.css={},i.template={},i.event={},i.template.ariaLabel=e.ariaLabel||e.label,i.template.label=e.label,i.template.tooltip=e.tooltip||e.label,i.template.tooltipDirection=void 0!==e.tooltipDirection&&r.indexOf(e.tooltipDirection)!==-1?e.tooltipDirection:"top",i.template.leftIcon=e.iconButton||e.leftIcon,i.template.rightIcon=e.rightIcon,i.template.hasLeftIcon=void 0!==i.template.leftIcon,i.template.hasRightIcon=void 0===e.iconButton&&void 0!==i.template.rightIcon,i.css.iconButton=void 0!==e.iconButton?"md-icon-button":"",i.parent=n,i.event.click=t.click}angular.module("editor.ui").factory("OtusButtonWidgetFactory",t)}(),function(){"use strict";function t(t){var e={scope:{placeholder:"@",label:"=",ariaLabel:"@",leftIcon:"@",ngModel:"="},templateUrl:"app/editor/ui/base/text-editor/text-editor.html",retrict:"E",link:function(e,n){e.widget=t.create(e,n)}};return e}angular.module("editor.ui").directive("otusTextEditor",t),t.$inject=["OtusTextEditorWidgetFactory"]}(),function(){"use strict";function t(t){function n(n,i){return new e(n,i,t)}var i=this;return i.create=n,i}function e(t,e,n){function i(){m.ngModel&&f()}function r(){return"OtusTextEditorWidget"}function o(){return t.uuid}function a(){return m.ngModel.ptBR.formattedText}function u(){return e}function c(){return t.$parent.widget}function s(){return c().getItem()}function l(){m.ngModel.ptBR.formattedText=d(event.target.innerHTML),m.ngModel.ptBR.plainText=event.target.innerText}function d(t){return t.replace(/"/g,"'")}function f(){m.getElement().children()[0].innerHTML=m.getLabel()}var m=this;m.input=angular.element(e.children()[0]),m.ngModel=t.ngModel,m.placeholder=t.placeholder,m.getClassName=r,m.getUUID=o,m.getElement=u,m.getParent=c,m.getItem=s,m.getLabel=a,i(),e.on("focusout",function(t){l(),n.create().execute(m)})}angular.module("editor.ui").factory("OtusTextEditorWidgetFactory",t),t.$inject=["UpdateQuestionEventFactory"]}(),function(){"use strict";function t(t,e,n){function i(){r=e.create(self.item),t.children()[0].innerText=r.getCustomizedID()}self=this;var r;self.$onInit=i,t.on("focusout",function(t){n.execute(t,r)})}angular.module("editor.ui").component("editableId",{templateUrl:"app/editor/ui/base/editable-id/editable-id.html",controller:t,bindings:{item:"<"}}),t.$inject=["$element","EditableIDFactory","EditableCustomIDService"]}(),function(){"use strict";function t(t,e,n){function i(t){return""===t}function r(t){return t.replace(/\s/g,"")}function o(t,e){t.target.innerText=e.getCustomizedID()}function a(t,e){return t!==e.getCustomizedID()}function u(t,u){var l=r(t.target.innerText);l===u.getCustomizedID()||i(l)?o(t,u):a(l,u)&&(c(l)?(u.updateCustomizedID(l),e.create().execute(s),o(t,u)):(n.show(n.simple().textContent("O ID inserido já está em uso.")),o(t,u)))}function c(e){return!!t.getSurvey().isAvailableCustomID(e)}var s=this;s.isEmpty=i,s.removeAllBlankSpaces=r,s.restoreScreenID=o,s.hasChanges=a,s.execute=u}angular.module("editor.ui").service("EditableCustomIDService",t),t.$inject=["WorkspaceService","UpdateQuestionEventFactory","$mdToast"]}(),function(){"use strict";function t(t){function n(n){return new e(n,t)}var i=this;return i.create=n,i}function e(t,e){function n(){var t;return t="CheckboxAnswerOption"===c.objectType?c.optionID:c.templateID}function i(){var t;return t="CheckboxAnswerOption"===c.objectType?c.customOptionID:c.customID}function r(){return a}function o(t){a=t,"CheckboxAnswerOption"===c.objectType?c.setCustomOptionID(t):e.execute(c,t)}var a,u=this,c=t;u.getCustomizedID=i,u.getAutoGeneratedID=n,u.getLastValidID=r,u.updateCustomizedID=o}angular.module("editor.ui").factory("EditableIDFactory",t),t.$inject=["UpdateSurveyItemCustomID"]}(),function(){"use strict";function t(t){var e={scope:{},restrict:"E",templateUrl:"app/editor/ui/metadata/group/metadata-group.html",link:function(e,n){e.widget=t.create(e,n)}};return e}angular.module("editor.ui").directive("otusMetadataGroup",t),t.$inject=["MetadataGroupWidgetFactory"]}(),function(){"use strict";function t(t,n,i){function r(r,o){return new e(r,o,t,n,i)}var o=this;return o.create=r,o}function e(t,e,n,i,r){function o(){g.getItem().metadata.options.length>0&&d()}function a(){return"MetadataGroupWidget"}function u(){return t.uuid}function c(){return e}function s(){return t.$parent.widget}function l(){return s().getItem()}function d(){g.getItem().metadata.options.forEach(function(t){var e=n.create(t,g);g.options.push(e)})}function f(){var t=i.create().execute(g),e=n.create(t,g);g.options.push(e)}function m(){r.create().execute(g),g.options.splice(-1)}var g=this;g.ngModel=t.ngModel,g.options=[],g.getClassName=a,g.getUUID=u,g.getElement=c,g.getParent=s,g.getItem=l,g.addOption=f,g.removeLastOption=m,o()}angular.module("editor.ui").factory("MetadataGroupWidgetFactory",t),t.$inject=["MetadataOptionWidgetFactory","AddMetadataAnswerEventFactory","RemoveMetadataOptionEventFactory"]}(),function(){"use strict";function t(){function t(t,n){return new e(t,n)}var n=this;return n.create=t,n}function e(t,e){var n=this;n.name="MetadataAnswerOption",n.parentGroup=e,n.option=t}angular.module("editor.ui").factory("MetadataOptionWidgetFactory",t)}(),function(){"use strict";function t(t){var e={scope:{},restrict:"E",templateUrl:"app/editor/ui/validation/editor/validation-editor.html",link:function(e,n){e.widget=t.create(e,n)}};return e}angular.module("editor.ui").directive("otusFillingRulesEditor",t),t.$inject=["FillingRulesEditorWidgetFactory"]}(),function(){"use strict";function t(t,n,i,r,o){function a(a,u){return new e(a,u,t,n,i,r,o)}var u=this;return u.create=a,u}function e(t,e,n,i,r,o,a){function u(){S=c(),"CheckboxQuestion"!==d().objectType&&(Object.keys(w.getItem().fillingRules.options).length>0?f():m("mandatory"))}function c(){var t=d().validators();return t}function s(){return e}function l(){return t.$parent.widget}function d(){return l().getItem()}function f(){Object.keys(w.getItem().fillingRules.options).forEach(function(t){g(t)})}function m(t){n.create().execute(d(),t),g(t)}function g(n){S.splice(S.indexOf(n),1);var i=r.create(n),a=e.find("#validators-column"),u=o(i)(t);a.append(u)}function p(t){S.push(t),i.create().execute(w,t)}function v(){a.create().execute()}function h(t){return S.indexOf(t)>-1}function y(){return!(S.length>0)}var w=this;w.ngModel=t.ngModel,w.getElement=s,w.getParent=l,w.getItem=d,w.addValidator=m,w.checkIfShow=h,w.deleteValidator=p,w.updateFillingRules=v,w.menuDisabler=y,u();var S}angular.module("editor.ui").factory("FillingRulesEditorWidgetFactory",t),t.$inject=["AddFillingRulesEventFactory","RemoveFillingRulesEventFactory","OtusFillingRulesWidgetFactory","$compile","UpdateFillingRulesEventFactory"]}(),function(){"use strict";function t(){function t(t){return n[t]}var e=this;e.create=t;var n={alphanumeric:"<otus:alphanumeric-validator></otus:alphanumeric-validator>",distinct:"<otus:distinct-validator></otus:distinct-validator>",futureDate:"<otus:future-date-validator></otus:future-date-validator>","in":"<otus:in-validator></otus:in-validator>",lowerLimit:"<otus:lower-limit-validator></otus:lower-limit-validator>",lowerCase:"<otus:lower-case-validator></otus:lower-case-validator>",mandatory:"<otus:mandatory-validator></otus:mandatory-validator>",maxDate:"<otus:max-date-validator></otus:max-date-validator>",maxLength:"<otus:max-length-validator></otus:max-length-validator>",maxTime:"<otus:max-time-validator></otus:max-time-validator>",minDate:"<otus:min-date-validator></otus:min-date-validator>",minLength:"<otus:min-length-validator></otus:min-length-validator>",minTime:"<otus:min-time-validator></otus:min-time-validator>",parameter:"<otus:parameter-validator></otus:parameter-validator>",pastDate:"<otus:past-date-validator></otus:past-date-validator>",precision:"<otus:precision-validator></otus:precision-validator>",rangeDate:"<otus:range-date-validator></otus:range-date-validator>",scale:"<otus:scale-validator></otus:scale-validator>",specials:"<otus:specials-validator></otus:specials-validator>",upperCase:"<otus:upper-case-validator></otus:upper-case-validator>",upperLimit:"<otus:upper-limit-validator></otus:upper-limit-validator>"};return e}angular.module("editor.ui").factory("OtusFillingRulesWidgetFactory",t)}(),function(){"use strict";function t(t){var e={scope:{},restrict:"E",templateUrl:"app/editor/ui/validation/require/range-date/range-date-validator.html",link:function(e,n){e.widget=t.create(e,n)}};return e}angular.module("editor.ui").directive("otusRangeDateValidator",t),t.$inject=["RangeDateValidatorWidgetFactory"]}(),function(){"use strict";function t(){function t(t,n){return new e(t,n)}var n=this;return n.create=t,n}function e(t,e){function n(){var t=c.fillingRules.options;a.data.initial=new Date(t[u].data.reference.initial),a.data.end=new Date(t[u].data.reference.end),a.updateData()}function i(){r().data.reference.initial=a.data.initial,r().data.reference.end=a.data.end,t.$parent.widget.updateFillingRules()}function r(){return c.fillingRules.options[u]}function o(){t.$parent.widget.deleteValidator(u),e.remove(),t.$destroy()}var a=this,u="rangeDate";a.data={initial:new Date,end:new Date},a.updateData=i,a.deleteValidator=o;var c=t.$parent.widget.getItem();n()}angular.module("editor.ui").factory("RangeDateValidatorWidgetFactory",t)}(),function(){"use strict";function t(t){var e={scope:{},restrict:"E",templateUrl:"app/editor/ui/validation/require/max-date/max-date-validator.html",link:function(e,n){e.widget=t.create(e,n)}};return e}angular.module("editor.ui").directive("otusMaxDateValidator",t),t.$inject=["MaxDateValidatorWidgetFactory"]}(),function(){"use strict";function t(){function t(t,n){return new e(t,n)}var n=this;return n.create=t,n}function e(t,e){function n(){a.data=new Date(c.fillingRules.options[u].data.reference),i()}function i(){r().data.reference=a.data,t.$parent.widget.updateFillingRules()}function r(){return c.fillingRules.options[u]}function o(){t.$parent.widget.deleteValidator(u),e.remove(),t.$destroy()}var a=this,u="maxDate";a.data=new Date,a.updateData=i,a.deleteValidator=o;var c=t.$parent.widget.getItem();n()}angular.module("editor.ui").factory("MaxDateValidatorWidgetFactory",t)}(),function(){"use strict";function t(t){var e={scope:{},restrict:"E",templateUrl:"app/editor/ui/validation/require/distinct/distinct-validator.html",link:function(e,n){e.widget=t.create(e,n)}};return e}angular.module("editor.ui").directive("otusDistinctValidator",t),t.$inject=["DistinctValidatorWidgetFactory"]}(),function(){"use strict";function t(){function t(t,n){return new e(t,n)}var n=this;return n.create=t,n}function e(t,e){function n(){a.data=c.fillingRules.options[u].data.reference}function i(){r().data.reference=a.data,t.$parent.widget.updateFillingRules()}function r(){return c.fillingRules.options[u]}function o(){t.$parent.widget.deleteValidator(u),e.remove(),t.$destroy()}var a=this,u="distinct";a.data,a.updateData=i,a.deleteValidator=o;var c=t.$parent.widget.getItem();n()}angular.module("editor.ui").factory("DistinctValidatorWidgetFactory",t)}(),function(){"use strict";function t(t){var e={scope:{},restrict:"E",templateUrl:"app/editor/ui/validation/require/past-date/past-date-validator.html",link:function(e,n){e.widget=t.create(e,n)}};return e}angular.module("editor.ui").directive("otusPastDateValidator",t),t.$inject=["PastDateValidatorWidgetFactory"]}(),function(){"use strict";function t(){function t(t,n){return new e(t,n)}var n=this;return n.create=t,n}function e(t,e){function n(){c.fillingRules.options;a.data=c.fillingRules.options[u].data.reference,a.updateData()}function i(){r().data.reference=a.data,t.$parent.widget.updateFillingRules()}function r(){return c.fillingRules.options[u]}function o(){t.$parent.widget.deleteValidator(u),e.remove(),t.$destroy()}var a=this,u="pastDate";a.updateData=i,a.deleteValidator=o;var c=t.$parent.widget.getItem();n()}angular.module("editor.ui").factory("PastDateValidatorWidgetFactory",t)}(),function(){"use strict";function t(t){var e={scope:{},restrict:"E",templateUrl:"app/editor/ui/validation/require/future-date/future-date-validator.html",link:function(e,n){e.widget=t.create(e,n)}};return e}angular.module("editor.ui").directive("otusFutureDateValidator",t),t.$inject=["FutureDateValidatorWidgetFactory"];
}(),function(){"use strict";function t(){function t(t,n){return new e(t,n)}var n=this;return n.create=t,n}function e(t,e){function n(){var t=c.fillingRules.options;t.hasOwnProperty(u)&&(a.data=c.fillingRules.options[u].data.reference,a.updateData())}function i(){r().data.reference=a.data,t.$parent.widget.updateFillingRules()}function r(){return c.fillingRules.options[u]}function o(){t.$parent.widget.deleteValidator(u),e.remove(),t.$destroy()}var a=this,u="futureDate";a.updateData=i,a.deleteValidator=o;var c=t.$parent.widget.getItem();n()}angular.module("editor.ui").factory("FutureDateValidatorWidgetFactory",t)}(),function(){"use strict";function t(t){var e={scope:{},restrict:"E",templateUrl:"app/editor/ui/validation/require/upper-limit/upper-limit-validator.html",link:function(e,n){e.widget=t.create(e,n)}};return e}angular.module("editor.ui").directive("otusUpperLimitValidator",t),t.$inject=["UpperLimitValidatorWidgetFactory"]}(),function(){"use strict";function t(){function t(t,n){return new e(t,n)}var n=this;return n.create=t,n}function e(t,e){function n(){var t=c.fillingRules.options;a.data=t[u].data.reference}function i(){r().data.reference=a.data,t.$parent.widget.updateFillingRules()}function r(){return c.fillingRules.options[u]}function o(){t.$parent.widget.deleteValidator(u),e.remove(),t.$destroy()}var a=this,u="upperLimit";a.data=null,a.updateData=i,a.deleteValidator=o;var c=t.$parent.widget.getItem();n()}angular.module("editor.ui").factory("UpperLimitValidatorWidgetFactory",t)}(),function(){"use strict";function t(t){var e={scope:{},restrict:"E",templateUrl:"app/editor/ui/validation/require/lower-limit/lower-limit-validator.html",link:function(e,n){e.widget=t.create(e,n)}};return e}angular.module("editor.ui").directive("otusLowerLimitValidator",t),t.$inject=["LowerLimitValidatorWidgetFactory"]}(),function(){"use strict";function t(){function t(t,n){return new e(t,n)}var n=this;return n.create=t,n}function e(t,e){function n(){a.data=c.fillingRules.options[u].data.reference}function i(){r().data.reference=a.data,t.$parent.widget.updateFillingRules()}function r(){return c.fillingRules.options[u]}function o(){t.$parent.widget.deleteValidator(u),e.remove(),t.$destroy()}var a=this,u="lowerLimit";a.data=null,a.updateData=i,a.deleteValidator=o;var c=t.$parent.widget.getItem();n()}angular.module("editor.ui").factory("LowerLimitValidatorWidgetFactory",t)}(),function(){"use strict";function t(t){var e={scope:{},restrict:"E",templateUrl:"app/editor/ui/validation/require/min-length/min-length-validator.html",link:function(e,n){e.widget=t.create(e,n)}};return e}angular.module("editor.ui").directive("otusMinLengthValidator",t),t.$inject=["MinLengthValidatorWidgetFactory"]}(),function(){"use strict";function t(){function t(t,n){return new e(t,n)}var n=this;return n.create=t,n}function e(t,e){function n(){a.data=c.fillingRules.options[u].data.reference}function i(){r().data.reference=a.data,t.$parent.widget.updateFillingRules()}function r(){return c.fillingRules.options[u]}function o(){t.$parent.widget.deleteValidator(u),e.remove(),t.$destroy()}var a=this,u="minLength";a.data=null,a.updateData=i,a.deleteValidator=o;var c=t.$parent.widget.getItem();n()}angular.module("editor.ui").factory("MinLengthValidatorWidgetFactory",t)}(),function(){"use strict";function t(t){var e={scope:{},restrict:"E",templateUrl:"app/editor/ui/validation/require/max-length/max-length-validator.html",link:function(e,n){e.widget=t.create(e,n)}};return e}angular.module("editor.ui").directive("otusMaxLengthValidator",t),t.$inject=["MaxLengthValidatorWidgetFactory"]}(),function(){"use strict";function t(){function t(t,n){return new e(t,n)}var n=this;return n.create=t,n}function e(t,e){function n(){a.data=c.fillingRules.options[u].data.reference}function i(){r().data.reference=a.data,t.$parent.widget.updateFillingRules()}function r(){return c.fillingRules.options[u]}function o(){t.$parent.widget.deleteValidator(u),e.remove(),t.$destroy()}var a=this,u="maxLength";a.data=null,a.updateData=i,a.deleteValidator=o;var c=t.$parent.widget.getItem();n()}angular.module("editor.ui").factory("MaxLengthValidatorWidgetFactory",t)}(),function(){"use strict";function t(t){var e={scope:{},restrict:"E",templateUrl:"app/editor/ui/validation/require/mandatory/mandatory-validator.html",link:function(e,n){e.widget=t.create(e,n)}};return e}angular.module("editor.ui").directive("otusMandatoryValidator",t),t.$inject=["MandatoryValidatorWidgetFactory"]}(),function(){"use strict";function t(){function t(t,n){return new e(t,n)}var n=this;return n.create=t,n}function e(t,e){function n(){o.data=u.fillingRules.options[a].data.reference}function i(){r().data.reference=o.data,t.$parent.widget.updateFillingRules()}function r(){return u.fillingRules.options[a]}var o=this,a="mandatory";o.data,o.updateData=i;var u=t.$parent.widget.getItem();n()}angular.module("editor.ui").factory("MandatoryValidatorWidgetFactory",t)}(),function(){"use strict";function t(t){var e={scope:{},restrict:"E",templateUrl:"app/editor/ui/validation/require/alphanumeric/alphanumeric-validator.html",link:function(e,n){e.widget=t.create(e,n)}};return e}angular.module("editor.ui").directive("otusAlphanumericValidator",t),t.$inject=["AlphanumericValidatorWidgetFactory"]}(),function(){"use strict";function t(){function t(t,n){return new e(t,n)}var n=this;return n.create=t,n}function e(t,e){function n(){var t=c.fillingRules.options;t.hasOwnProperty(u)&&(a.data=t[u].data.reference)}function i(){r().data.reference=a.data,t.$parent.widget.updateFillingRules()}function r(){return c.fillingRules.options[u]}function o(){t.$parent.widget.deleteValidator(u),e.remove(),t.$destroy()}var a=this,u="alphanumeric";a.data=!0,a.updateData=i,a.deleteValidator=o;var c=t.$parent.widget.getItem();n()}angular.module("editor.ui").factory("AlphanumericValidatorWidgetFactory",t)}(),function(){"use strict";function t(t){var e={scope:{},restrict:"E",templateUrl:"app/editor/ui/validation/require/in/in-validator.html",link:function(e,n){e.widget=t.create(e,n)}};return e}angular.module("editor.ui").directive("otusInValidator",t),t.$inject=["InValidatorWidgetFactory"]}(),function(){"use strict";function t(){function t(t,n){return new e(t,n)}var n=this;return n.create=t,n}function e(t,e){function n(){a.data=c.fillingRules.options[u].data.reference}function i(){r().data.reference=a.data,t.$parent.widget.updateFillingRules()}function r(){return c.fillingRules.options[u]}function o(){t.$parent.widget.deleteValidator(u),e.remove(),t.$destroy()}var a=this,u="in";a.data={initial:null,end:null},a.updateData=i,a.deleteValidator=o;var c=t.$parent.widget.getItem();n()}angular.module("editor.ui").factory("InValidatorWidgetFactory",t)}(),function(){"use strict";function t(t){var e={scope:{},restrict:"E",templateUrl:"app/editor/ui/validation/require/lower-case/lower-case-validator.html",link:function(e,n){e.widget=t.create(e,n)}};return e}angular.module("editor.ui").directive("otusLowerCaseValidator",t),t.$inject=["LowerCaseValidatorWidgetFactory"]}(),function(){"use strict";function t(){function t(t,n){return new e(t,n)}var n=this;return n.create=t,n}function e(t,e){function n(){a.data=c.fillingRules.options[u].data.reference}function i(){r().data.reference=a.data,t.$parent.widget.updateFillingRules()}function r(){return c.fillingRules.options[u]}function o(){t.$parent.widget.deleteValidator(u),e.remove(),t.$destroy()}var a=this,u="lowerCase";a.data=!0,a.updateData=i,a.deleteValidator=o;var c=t.$parent.widget.getItem();n()}angular.module("editor.ui").factory("LowerCaseValidatorWidgetFactory",t)}(),function(){"use strict";function t(t){var e={scope:{},restrict:"E",templateUrl:"app/editor/ui/validation/require/max-time/max-time-validator.html",link:function(e,n){e.widget=t.create(e,n)}};return e}angular.module("editor.ui").directive("otusMaxTimeValidator",t),t.$inject=["MaxTimeValidatorWidgetFactory"]}(),function(){"use strict";function t(){function t(t,n){return new e(t,n)}var n=this;return n.create=t,n}function e(t,e){function n(){var t=c.fillingRules.options[u].data.reference;""!==t?a.data=new Date(t):(a.data.setHours("01"),a.data.setMinutes("00"),a.data.setSeconds("00"),a.data.setMilliseconds("00")),a.updateData()}function i(){a.data&&(r().data.reference=a.data.toString(),t.$parent.widget.updateFillingRules())}function r(){return c.fillingRules.options[u]}function o(){t.$parent.widget.deleteValidator(u),e.remove(),t.$destroy()}var a=this,u="maxTime";a.data=new Date,a.updateData=i,a.deleteValidator=o;var c=t.$parent.widget.getItem();n()}angular.module("editor.ui").factory("MaxTimeValidatorWidgetFactory",t)}(),function(){"use strict";function t(t){var e={scope:{},restrict:"E",templateUrl:"app/editor/ui/validation/require/min-date/min-date-validator.html",link:function(e,n){e.widget=t.create(e,n)}};return e}angular.module("editor.ui").directive("otusMinDateValidator",t),t.$inject=["MinDateValidatorWidgetFactory"]}(),function(){"use strict";function t(){function t(t,n){return new e(t,n)}var n=this;return n.create=t,n}function e(t,e){function n(){var t=c.fillingRules.options;a.data=new Date(t[u].data.reference),a.updateData()}function i(){r().data.reference=a.data,t.$parent.widget.updateFillingRules()}function r(){return c.fillingRules.options[u]}function o(){t.$parent.widget.deleteValidator(u),e.remove(),t.$destroy()}var a=this,u="minDate";a.data=(new Date).toLocaleDateString(),a.updateData=i,a.deleteValidator=o;var c=t.$parent.widget.getItem();n()}angular.module("editor.ui").factory("MinDateValidatorWidgetFactory",t)}(),function(){"use strict";function t(t){var e={scope:{},restrict:"E",templateUrl:"app/editor/ui/validation/require/min-time/min-time-validator.html",link:function(e,n){e.widget=t.create(e,n)}};return e}angular.module("editor.ui").directive("otusMinTimeValidator",t),t.$inject=["MinTimeValidatorWidgetFactory"]}(),function(){"use strict";function t(){function t(t,n){return new e(t,n)}var n=this;return n.create=t,n}function e(t,e){function n(){var t=c.fillingRules.options[u].data.reference;""!==t?a.data=new Date(t):(a.data.setHours("01"),a.data.setMinutes("00"),a.data.setSeconds("00"),a.data.setMilliseconds("00")),a.updateData()}function i(){a.data&&(r().data.reference=a.data.toString(),t.$parent.widget.updateFillingRules())}function r(){return c.fillingRules.options[u]}function o(){t.$parent.widget.deleteValidator(u),e.remove(),t.$destroy()}var a=this,u="minTime";a.data=new Date("Fri Mar 25 2015 09:56:24 GMT+0100 (Tokyo Time)"),a.updateData=i,a.deleteValidator=o;var c=t.$parent.widget.getItem();n()}angular.module("editor.ui").factory("MinTimeValidatorWidgetFactory",t)}(),function(){"use strict";function t(t){var e={scope:{},restrict:"E",templateUrl:"app/editor/ui/validation/require/parameter/parameter-validator.html",link:function(e,n){e.widget=t.create(e,n)}};return e}angular.module("editor.ui").directive("otusParameterValidator",t),t.$inject=["ParameterValidatorWidgetFactory"]}(),function(){"use strict";function t(){function t(t,n){return new e(t,n)}var n=this;return n.create=t,n}function e(t,e){function n(){var t=c.fillingRules.options;t.hasOwnProperty(u)&&(a.data=t[u].data.reference)}function i(){r().data.reference=a.data,t.$parent.widget.updateFillingRules()}function r(){return c.fillingRules.options[u]}function o(){t.$parent.widget.deleteValidator(u),e.remove(),t.$destroy()}var a=this,u="parameter";a.data="",a.updateData=i,a.deleteValidator=o;var c=t.$parent.widget.getItem();n()}angular.module("editor.ui").factory("ParameterValidatorWidgetFactory",t)}(),function(){"use strict";function t(t){var e={scope:{},restrict:"E",templateUrl:"app/editor/ui/validation/require/precision/precision-validator.html",link:function(e,n){e.widget=t.create(e,n)}};return e}angular.module("editor.ui").directive("otusPrecisionValidator",t),t.$inject=["PrecisionValidatorWidgetFactory"]}(),function(){"use strict";function t(){function t(t,n){return new e(t,n)}var n=this;return n.create=t,n}function e(t,e){function n(){a.data=c.fillingRules.options[u].data.reference}function i(){r().data.reference=a.data,t.$parent.widget.updateFillingRules()}function r(){return c.fillingRules.options[u]}function o(){t.$parent.widget.deleteValidator(u),e.remove(),t.$destroy()}var a=this,u="precision";a.data=null,a.updateData=i,a.deleteValidator=o;var c=t.$parent.widget.getItem();n()}angular.module("editor.ui").factory("PrecisionValidatorWidgetFactory",t)}(),function(){"use strict";function t(t){var e={scope:{},restrict:"E",templateUrl:"app/editor/ui/validation/require/specials/specials-validator.html",link:function(e,n){e.widget=t.create(e,n)}};return e}angular.module("editor.ui").directive("otusSpecialsValidator",t),t.$inject=["SpecialsValidatorWidgetFactory"]}(),function(){"use strict";function t(){function t(t,n){return new e(t,n)}var n=this;return n.create=t,n}function e(t,e){function n(){var t=c.fillingRules.options;a.data=t[u].data.reference}function i(){r().data.reference=a.data,t.$parent.widget.updateFillingRules()}function r(){return c.fillingRules.options[u]}function o(){t.$parent.widget.deleteValidator(u),e.remove(),t.$destroy()}var a=this,u="specials";a.data=!0,a.updateData=i,a.deleteValidator=o;var c=t.$parent.widget.getItem();n()}angular.module("editor.ui").factory("SpecialsValidatorWidgetFactory",t)}(),function(){"use strict";function t(t){var e={scope:{},restrict:"E",templateUrl:"app/editor/ui/validation/require/upper-case/upper-case-validator.html",link:function(e,n){e.widget=t.create(e,n)}};return e}angular.module("editor.ui").directive("otusUpperCaseValidator",t),t.$inject=["UpperCaseValidatorWidgetFactory"]}(),function(){"use strict";function t(){function t(t,n){return new e(t,n)}var n=this;return n.create=t,n}function e(t,e){function n(){var t=c.fillingRules.options;a.data=t[u].data.reference}function i(){r().data.reference=a.data,t.$parent.widget.updateFillingRules()}function r(){return c.fillingRules.options[u]}function o(){t.$parent.widget.deleteValidator(u),e.remove(),t.$destroy()}var a=this,u="upperCase";a.data=!0,a.updateData=i,a.deleteValidator=o;var c=t.$parent.widget.getItem();n()}angular.module("editor.ui").factory("UpperCaseValidatorWidgetFactory",t)}(),function(){"use strict";function t(t){var e={scope:{},restrict:"E",templateUrl:"app/editor/ui/validation/require/scale/scale-validator.html",link:function(e,n){e.widget=t.create(e,n)}};return e}angular.module("editor.ui").directive("otusScaleValidator",t),t.$inject=["ScaleValidatorWidgetFactory"]}(),function(){"use strict";function t(){function t(t,n){return new e(t,n)}var n=this;return n.create=t,n}function e(t,e){function n(){var t=c.fillingRules.options;a.data=t[u].data.reference}function i(){r().data.reference=a.data,t.$parent.widget.updateFillingRules()}function r(){return c.fillingRules.options[u]}function o(){t.$parent.widget.deleteValidator(u),e.remove(),t.$destroy()}var a=this,u="scale";a.data=null,a.updateData=i,a.deleteValidator=o;var c=t.$parent.widget.getItem();n()}angular.module("editor.ui").factory("ScaleValidatorWidgetFactory",t)}(),function(){"use strict";function t(t,e){var n={scope:{},templateUrl:"app/editor/ui/survey-item/misc/misc.html",retrict:"E",link:function(n,i){n.widget=t.create(n,i,e.lastLoadedQuestion)}};return n}angular.module("editor.ui").directive("miscItem",t),t.$inject=["SurveyItemWidgetFactory","SheetContentService"]}(),function(){"use strict";function t(t,e){var n={scope:{},templateUrl:"app/editor/ui/survey-item/question/question.html",retrict:"E",link:function(n,i){n.widget=t.create(n,i,e.lastLoadedQuestion)}};return n}angular.module("editor.ui").directive("otusQuestionItem",t),t.$inject=["SurveyItemWidgetFactory","SheetContentService"]}(),function(){"use strict";function t(t,e,n,i,r,o,a,u,c,s,l){function d(t,e,n){return m[n.objectType].create(t,e,n)}var f=this,m={CalendarQuestion:t,IntegerQuestion:e,DecimalQuestion:n,SingleSelectionQuestion:i,CheckboxQuestion:r,TextQuestion:o,TimeQuestion:a,EmailQuestion:u,PhoneQuestion:c,TextItem:s,ImageItem:l};return f.create=d,f}angular.module("editor.ui").factory("SurveyItemWidgetFactory",t),t.$inject=["CalendarQuestionWidgetFactory","IntegerQuestionWidgetFactory","DecimalQuestionWidgetFactory","SingleSelectionQuestionWidgetFactory","CheckboxQuestionWidgetFactory","TextQuestionWidgetFactory","TimeQuestionWidgetFactory","EmailQuestionWidgetFactory","PhoneQuestionWidgetFactory","TextItemWidgetFactory","ImageItemWidgetFactory"]}(),function(){"use strict";function t(t){var e={scope:{},templateUrl:"app/editor/ui/survey-item/misc/text/text-item.html",retrict:"E",link:function(t,e){t.widget=t.$parent.widget}};return e}angular.module("editor.ui").directive("textItem",t),t.$inject=["TextItemWidgetFactory"]}(),function(){"use strict";function t(){function t(t){return new e(t)}var n=this;return n.create=t,n}function e(t){function e(){return t.$parent.widget}function n(){return e().getItem()}function i(){return"<text-item></text-item>"}var r=this;r.name="TextItem",r.getParent=e,r.item=n(),r.getTemplate=i}angular.module("editor.ui").factory("TextItemWidgetFactory",t)}(),function(){"use strict";function t(t){var e={scope:{},templateUrl:"app/editor/ui/survey-item/misc/image/image-item.html",retrict:"E",link:function(t,e){t.widget=t.$parent.widget}};return e}angular.module("editor.ui").directive("imageItem",t)}(),function(){"use strict";function t(){function t(t){return new e(t)}var n=this;return n.create=t,n}function e(t){function e(){return t.$parent.widget}function n(){return e().getItem()}function i(){return"<image-item></image-item>"}var r=this;r.name="ImageItem",r.getParent=e,r.item=n(),r.getTemplate=i}angular.module("editor.ui").factory("ImageItemWidgetFactory",t)}(),function(){"use strict";function t(){var t={scope:{},templateUrl:"app/editor/ui/survey-item/question/calendar/calendar-question.html",retrict:"E"};return t}angular.module("editor.ui").directive("calendarQuestion",t)}(),function(){"use strict";function t(){function t(t,n){return new e(t,n)}var n=this;return n.create=t,n}function e(t,e){function n(){return"CalendarQuestionWidget"}function i(){return t.uuid}function r(){return e}function o(){return t.$parent.widget}function a(){return o().getItem()}function u(){return"<calendar-question></calendar-question>"}var c=this;c.getClassName=n,c.getUUID=i,c.getElement=r,c.getParent=o,c.getItem=a,c.getTemplate=u}angular.module("editor.ui").factory("CalendarQuestionWidgetFactory",t)}(),function(){"use strict";function t(t){var e={scope:{ngModel:"=",ariaLabel:"@"},templateUrl:"app/editor/ui/survey-item/question/integer/integer-question.html",restrict:"E",link:function(e,n){e.widget=t.create(e,n)}};return e}angular.module("editor.ui").directive("integerQuestion",t),t.$inject=["IntegerQuestionWidgetFactory"]}(),function(){"use strict";angular.module("editor.ui").directive("uiInteger",function(){return{link:function(t,e,n,i){function r(t){var e=(angular.element(t.currentTarget),t.which);return a(e)||u(e)}function o(t){var e=angular.element(t.currentTarget),n=t.which,i=e.val();0===i.length?c="":a(n)||u(n)?c=e.val():u(n)||e.val(c)}function a(t){return t>=48&&t<=57||t>=96&&t<=105}function u(t){var e=109===t,n=16===t,i=8===t,r=36===t,o=35===t,a=46===t,u=17===t,c=37===t,s=39===t;return e||n||i||r||o||a||u||c||s}var c;e.on("keydown",r),e.on("keyup",o)}}})}(),function(){"use strict";function t(){function t(t,n){return new e(t,n)}var n=this;return n.create=t,n}function e(t,e){function n(){return"IntegerQuestionWidget"}function i(){return t.uuid}function r(){return e}function o(){return t.$parent.widget}function a(){return o().getItem()}function u(){return"<integer-question></integer-question>"}var c=this;c.getClassName=n,c.getUUID=i,c.getElement=r,c.getParent=o,c.getItem=a,c.getTemplate=u}angular.module("editor.ui").factory("IntegerQuestionWidgetFactory",t)}(),function(){"use strict";function t(t){var e={scope:{ngModel:"=",ariaLabel:"@"},templateUrl:"app/editor/ui/survey-item/question/decimal/decimal-question.html",restrict:"E",link:function(e,n){e.widget=t.create(e,n)}};return e}angular.module("editor.ui").directive("decimalQuestion",t),t.$inject=["DecimalQuestionWidgetFactory"]}(),function(){"use strict";angular.module("editor.ui").directive("uiDecimal",function(){return{link:function(t,e,n,i){function r(t){var e=(angular.element(t.currentTarget),t.which);return a(e)||u(e)}function o(t){var e=angular.element(t.currentTarget),n=t.which,i=e.val();0===i.length?c="":a(n)||u(n)?c=e.val():u(n)||e.val(c)}function a(t){return t>=48&&t<=57||t>=96&&t<=105}function u(t){var e=109===t,n=188===t,i=190===t,r=194===t,o=110===t,a=16===t,u=8===t,c=36===t,s=35===t,l=46===t,d=17===t,f=37===t,m=39===t;return e||n||i||r||o||a||u||c||s||l||d||f||m}var c;e.on("keydown",r),e.on("keyup",o)}}})}(),function(){"use strict";function t(){function t(t,n){return new e(t,n)}var n=this;return n.create=t,n}function e(t,e){function n(){return"DecimalQuestionWidget"}function i(){return t.uuid}function r(){return e}function o(){return t.$parent.widget}function a(){return o().getItem()}function u(){return"<decimal-question></decimal-question>"}var c=this;c.getClassName=n,c.getUUID=i,c.getElement=r,c.getParent=o,c.getItem=a,c.getTemplate=u}angular.module("editor.ui").factory("DecimalQuestionWidgetFactory",t)}(),function(){"use strict";function t(t){var e={scope:{},restrict:"E",templateUrl:"app/editor/ui/survey-item/question/checkbox/checkbox-question.html",link:function(e,n){e.widget=t.create(e,n)}};return e}angular.module("editor.ui").directive("checkboxQuestion",t),t.$inject=["CheckboxQuestionWidgetFactory"]}(),function(){"use strict";function t(t,n,i){function r(r,o){return new e(r,o,t,n,i)}var o=this;return o.create=r,o}function e(t,e,n,i,r){function o(){v.getItem().options.length>0&&m()}function a(){return"CheckboxQuestionWidget"}function u(){return t.uuid}function c(){return e}function s(){return t.$parent.widget}function l(){return s().getItem()}function d(){return"<checkbox-question></checkbox-question>"}function f(){v.getItem().createOption(p()),n.create().execute(v.getItem())}function m(){var t=angular.copy(v.getItem().options);v.getItem().options=[],t.forEach(function(t){v.getItem().loadJsonOption(JSON.stringify(t))})}function g(){v.getItem().removeLastOption(),n.create().execute(v.getItem())}function p(){var t,e=v.getItem().options.length;do t=v.getItem().customID+i.generateSuffixByOptionsLength(e++);while(!r.getSurvey().isAvailableCustomID(t));return t}var v=this;v.getClassName=a,v.getUUID=u,v.getElement=c,v.getParent=s,v.getItem=l,v.getTemplate=d,v.addOption=f,v.removeLastOption=g,o()}angular.module("editor.ui").factory("CheckboxQuestionWidgetFactory",t),t.$inject=["UpdateQuestionEventFactory","CheckboxSuffixIDGenerator","WorkspaceService"]}(),function(){"use strict";function t(t){var e={scope:{},restrict:"E",templateUrl:"app/editor/ui/survey-item/question/single-selection/group/single-selection-question.html",link:function(t){t.widget=t.$parent.widget}};return e}angular.module("editor.ui").directive("singleSelectionQuestion",t),t.$inject=["SingleSelectionQuestionWidgetFactory"]}(),function(){"use strict";function t(t,n,i){function r(r,o){return new e(r,o,t,n,i)}var o=this;return o.create=r,o}function e(t,e,n,i,r){function o(){p.getItem().options.length>0&&m()}function a(){return"SingleSelectionQuestionWidget"}function u(){return t.uuid}function c(){return e}function s(){return t.$parent.widget}function l(){return s().getItem()}function d(){return"<single-selection-question></single-selection-question>"}function f(){var t=i.create().execute(p),e=n.create(t,p);p.options.push(e)}function m(){p.getItem().options.forEach(function(t){var e=n.create(t,p);p.options.push(e)})}function g(){r.create().execute(p),p.options.splice(-1)}var p=this;p.options=[],p.getClassName=a,p.getUUID=u,p.getElement=c,p.getParent=s,p.getItem=l,p.getTemplate=d,p.addOption=f,p.removeLastOption=g,o()}angular.module("editor.ui").factory("SingleSelectionQuestionWidgetFactory",t),t.$inject=["AnswerOptionWidgetFactory","AddAnswerOptionEventFactory","RemoveAnswerOptionEventFactory"]}(),function(){"use strict";function t(){function t(t,n){return new e(t,n)}var n=this;return n.create=t,n}function e(t,e){var n=this;n.name="AnswerOption",n.parentGroup=e,n.option=t}angular.module("editor.ui").factory("AnswerOptionWidgetFactory",t)}(),function(){"use strict";function t(){var t={scope:{},templateUrl:"app/editor/ui/survey-item/question/text/text-question.html",retrict:"E"};return t}angular.module("editor.ui").directive("textQuestion",t)}(),function(){"use strict";function t(){function t(t,n){return new e(t,n)}var n=this;return n.create=t,n}function e(t,e){function n(){return"TextQuestionWidget"}function i(){return t.uuid}function r(){return e}function o(){return t.$parent.widget}function a(){return o().getItem()}function u(){return"<text-question></text-question>"}var c=this;c.getClassName=n,c.getUUID=i,c.getElement=r,c.getParent=o,c.getItem=a,c.getTemplate=u}angular.module("editor.ui").factory("TextQuestionWidgetFactory",t)}(),function(){"use strict";function t(){var t={scope:{},templateUrl:"app/editor/ui/survey-item/question/email/email-question.html",retrict:"E"};return t}angular.module("editor.ui").directive("emailQuestion",t)}(),function(){"use strict";function t(){function t(t,n){return new e(t,n)}var n=this;return n.create=t,n}function e(t,e){function n(){return"EmailQuestionWidget"}function i(){return t.uuid}function r(){return e}function o(){return t.$parent.widget}function a(){return o().getItem()}function u(){return"<email-question></email-question>"}var c=this;c.getClassName=n,c.getUUID=i,c.getElement=r,c.getParent=o,c.getItem=a,c.getTemplate=u}angular.module("editor.ui").factory("EmailQuestionWidgetFactory",t)}(),function(){"use strict";function t(){var t={scope:{},templateUrl:"app/editor/ui/survey-item/question/time/time-question.html",retrict:"E"};return t}angular.module("editor.ui").directive("timeQuestion",t)}(),function(){"use strict";function t(){function t(t,n){return new e(t,n)}var n=this;return n.create=t,n}function e(t,e){function n(){return"TimeQuestionWidget"}function i(){return t.uuid}function r(){return e}function o(){return t.$parent.widget}function a(){return o().getItem()}function u(){return"<time-question></time-question>"}var c=this;c.getClassName=n,c.getUUID=i,c.getElement=r,c.getParent=o,c.getItem=a,c.getTemplate=u}angular.module("editor.ui").factory("TimeQuestionWidgetFactory",t)}(),function(){"use strict";function t(){var t={scope:{ngModel:"=",ariaLabel:"@"},templateUrl:"app/editor/ui/survey-item/question/phone/phone-question.html",retrict:"E"};return t}angular.module("editor.ui").directive("phoneQuestion",t)}(),function(){"use strict";function t(){function t(t,n){return new e(t,n)}var n=this;return n.create=t,n}function e(t,e){function n(){return"PhoneQuestionWidget"}function i(){return t.uuid}function r(){return e}function o(){return t.$parent.widget}function a(){return o().getItem()}function u(){return"<phone-question></phone-question>"}var c=this;c.getClassName=n,c.getUUID=i,c.getElement=r,c.getParent=o,c.getItem=a,c.getTemplate=u}angular.module("editor.ui").factory("PhoneQuestionWidgetFactory",t)}(),function(){"use strict";function t(t,e,n,i){var r={scope:{},templateUrl:"app/editor/ui/survey-item-editor/survey-item-editor.html",retrict:"E",link:function(i,r,o){i.uuid=n.generateUUID(),i.widget=t.create(i,r,e.lastLoadedQuestion)}};return r}angular.module("editor.ui").directive("otusSurveyItemEditor",t),t.$inject=["SurveyItemEditorWidgetFactory","SheetContentService","UUIDService","PageAnchorService"]}(),function(){"use strict";function t(t){function n(n,i,r){return new e(n,i,r,t)}var i=this;return i.create=n,i}function e(t,e,n,i){function r(){return t.uuid}function o(){return e}function a(){return t.$parent.widget}function u(){return n}function c(){return u().templateID}function s(){return n.isQuestion()?"<otus:question-item></otus:question-item>":"<misc-item></misc-item>"}function l(){i.create().execute(n),e.remove()}var d=this;d.className="SurveyItemEditorWidget",d.getUUID=r,d.getElement=o,d.getParent=a,d.getItem=u,d.getContainer=s,d.deleteSurveyItem=l,d.getQuestionId=c}angular.module("editor.ui").factory("SurveyItemEditorWidgetFactory",t),t.$inject=["RemoveSurveyItemEventFactory"]}(),function(){"use strict";function t(t){function e(e,n){t.load(NAVIGATION_TEMPLATE,n,function(t){e.append(t)})}function n(t){t.empty()}var i=this;i.loadNavigation=e,i.closeNavigation=n}angular.module("editor.ui").service("SurveyItemSettingsContentService",t),t.$inject=["TemplateLoaderService"]}(),function(){"use strict";function t(t,e,n){function i(i){var r=e.find(".toolbar-content-"+i);r.children().length?n.closeNavigation(r):n.loadNavigation(r,t)}var r=this;r.navigation=i}angular.module("editor.ui").controller("SurveyItemSettingsController",t),t.$inject=["$scope","$element","SurveyItemSettingsContentService"]}(),function(){"use strict";function t(t,e){var n={scope:{},restrict:"E",controller:"SurveyItemSettingsController",templateUrl:"app/editor/ui/survey-item-editor/survey-item-settings/survey-item-settings.html",link:function(n,i,r){n.uuid=e.generateUUID(),n.widget=t.create(n,i)}};return n}angular.module("editor.ui").directive("otusSurveyItemSettings",t),t.$inject=["SurveyItemSettingsWidgetFactory","UUIDService"]}(),function(){"use strict";function t(){function t(t,n){return new e(t,n)}var n=this;return n.create=t,n}function e(t,e){function n(){return t.uuid}function i(){return e}function r(){return t.$parent.$parent.$parent.widget}function o(){return r().getItem()}function a(){c.ngClass.open=!c.ngClass.open,c.showNavigationEditor=!c.showNavigationEditor}function u(){c.ngClass.open=!c.ngClass.open,c.showValidationEditor=!c.showValidationEditor}var c=this;c.className="SurveyItemSettingsWidget",c.ngClass={},c.ngClass.open=!1,c.showNavigationEditor=!1,c.showValidationEditor=!1,c.getUUID=n,c.getElement=i,c.getParent=r,c.getItem=o,c.navigationButton=a,c.validationButton=u}angular.module("editor.ui").factory("SurveyItemSettingsWidgetFactory",t)}(),function(){function t(t){function e(){t.saveWork()}function n(){return 0===t.getSurvey().SurveyItemManager.getItemListSize()}var i=this;i.saveOfflineWork=e,i.isSurveyEmpty=n}angular.module("editor.ui").controller("EditorToolbarController",t),t.$inject=["WorkspaceService"]}(),function(){"use strict";function t(){function t(t){i=t}function e(t){}var n=this,i=null;n.showQuestionDataEditor=e,n.init=t}angular.module("editor.ui").service("MainContainerContentService",t)}(),function(){function t(t,e,n,i,r,o,a,u,c){function s(){n.init(m),i.setScope(t)}function l(){r.show({templateUrl:"app/editor/ui/survey-item-palette/bottom-sheet.html",disableParentScroll:!1})}function d(){var t=$("#navigation-preview-container"),n=t.parent().parent().parent();t.css("margin-top","10px"),t.css("height",n.height()-10+"px"),e.addEventListener("resize",function(){t.css("height",n.height()-10+"px")}),o.broadcast(u.NAVIGATION_BUILDER_ON,a.getSurvey()),o.onEvent(u.NAVIGATION_UPDATED,a.saveWork)}function f(){c.setup()}var m=this;m.showQuestionsMenu=l,m.startNavigationBuilder=d,m.startPreview=f,s()}angular.module("editor.ui").controller("MainContainerController",t),t.$inject=["$scope","$window","MainContainerContentService","UiBindingService","$mdBottomSheet","otusjs.studio.navigationBuilder.NavigationBuilderScopeService","WorkspaceService","NBEVENTS","otusjs.player.core.player.PlayerService"]}(),function(){"use strict";function t(){var t={restrict:"E",templateUrl:"app/editor/ui/stage/stage.html"};return t}angular.module("editor.ui").directive("otusStage",t)}(),function(){"use strict";function t(){var t={scope:{item:"@item"},templateUrl:"app/editor/ui/survey-item-editor/item-icon/otus-item-icon-template.html",retrict:"E",link:function(t,n,i){t.type=e(t.item)}};return t}function e(t){var e={CalendarQuestion:{icon:"date_range",tooltip:"Data"},IntegerQuestion:{icon:"looks_one",tooltip:"Número Inteiro"},DecimalQuestion:{icon:"exposure_zero",tooltip:"Número Decimal"},SingleSelectionQuestion:{
icon:"radio_button_checked",tooltip:"Seleção Única"},CheckboxQuestion:{icon:"check_box",tooltip:"Checkbox"},TextQuestion:{icon:"text_format",tooltip:"Texto"},EmailQuestion:{icon:"email",tooltip:"Email"},TimeQuestion:{icon:"access_time",tooltip:"Hora"},PhoneQuestion:{icon:"phone",tooltip:"Telefone"},TextItem:{icon:"message",tooltip:"Texto"},ImageItem:{icon:"image",tooltip:"Imagem"}};return e[t]}angular.module("editor.ui").directive("otusItemIcon",t),t.$inject=[]}(),function(){"use strict";function t(t){var e={scope:{label:"@",ariaLabel:"@",leftIcon:"@"},transclude:!0,templateUrl:"app/editor/ui/survey-item-palette/survey-item-palette.html",retrict:"E",link:function(e){e.widget=t.create(e.$parent.widget)}};return e}angular.module("editor.ui").directive("otusSurveyItemPalette",t),t.$inject=["OtusSurveyItemPaletteWidgetFactory"]}(),function(){"use strict";function t(t){function n(n){return new e(n,t)}var i=this;return i.create=n,i}function e(t,e){function n(){e.create().execute("CalendarQuestion")}function i(){e.create().execute("IntegerQuestion")}function r(){e.create().execute("DecimalQuestion")}function o(){e.create().execute("SingleSelectionQuestion")}function a(){e.create().execute("TextQuestion")}function u(){e.create().execute("TimeQuestion")}function c(){e.create().execute("EmailQuestion")}function s(){e.create().execute("TextItem")}function l(){e.create().execute("ImageItem")}function d(){e.create().execute("PhoneQuestion")}function f(){e.create().execute("CheckboxQuestion")}var m=this;m.className=m.constructor.name,m.parent=t,m.addCalendarQuestion=n,m.addIntegerQuestion=i,m.addDecimalQuestion=r,m.addSingleSelectionQuestion=o,m.addTextQuestion=a,m.addTimeQuestion=u,m.addEmailQuestion=c,m.addTextItem=s,m.addImageItem=l,m.addPhoneQuestion=d,m.addCheckboxQuestion=f}angular.module("editor.ui").factory("OtusSurveyItemPaletteWidgetFactory",t),t.$inject=["AddSurveyItemEventFactory"]}(),function(){"use strict";angular.module("editor.workspace",[])}(),function(){"use strict";function t(t){function e(e,n,i){return t.getSurveyFactory().create(e,n)}function n(e){return t.getSurveyFactory().load(e)}var i=this;i.newSurvey=e,i.loadSurvey=n}angular.module("editor.workspace").service("SurveyLoaderService",t),t.$inject=["ModelFacadeService"]}(),function(){"use strict";function t(t){function n(n){var i=t.create();return new e(n,i)}var i=this;return i.create=n,i}function e(t,e){function n(){a.isdb=e,a.sessions={workspaceOwner:t}}function i(t){Object.defineProperty(a,"project",{value:t,writable:!1})}function r(t){a.sessions[t.owner.username]=t}function o(){}var a=this;a.importProject=i,a.attachWorkeSession=r,a.loadProjectConfiguration=o,n()}angular.module("editor.workspace").factory("WorkspaceFactory",t),t.$inject=["InSessionDatabaseFactory"]}(),function(){"use strict";function t(t,e,n,i,r){function o(e){v.workspace=t.create(e),h=-1,g({type:"NEW_PROJECT"})}function a(t){var i=n.newSurvey(t.name,t.acronym.toUpperCase(),t.version);m(e.create(i,v.workspace.sessions.workspaceOwner))}function u(t){var i=n.loadSurvey(t);m(e.create(i,v.workspace.sessions.workspaceOwner))}function c(){s(),v.workspace.project.close("now"),h=-1,y=[],v.workspace=void 0}function s(){i.saveSurveyTemplateRevision(v.workspace.project.survey,v.workspace.sessions.workspaceOwner)}function l(){return r.exportSurvey(v.workspace.project.survey.toJson())}function d(){return++h}function f(){return v.workspace.project.survey}function m(t){v.workspace.importProject(t),v.workspace.loadProjectConfiguration()}function g(t){y.forEach(function(e){e.update(t)})}function p(t){y.push(t)}var v=this,h=-1,y=[];v.initializeWorkspace=o,v.startNewWork=a,v.loadWork=u,v.closeWork=c,v.saveWork=s,v.getQuestionId=d,v.exportWork=l,v.getSurvey=f,v.registerObserver=p}angular.module("editor.workspace").service("WorkspaceService",t),t.$inject=["WorkspaceFactory","SurveyProjectFactory","SurveyLoaderService","CrossSessionDatabaseService","SurveyExportService"]}(),function(){"use strict";function t(t){var e={restrict:"A",link:function(e,n){n.on("click",function(){var e=document.createElement("a");e.setAttribute("href",t.exportWork()),e.setAttribute("download","surveyTemplate.json"),e.setAttribute("target","_blank"),e.click()})}};return e}angular.module("editor.workspace").directive("surveyTemplateExport",t),t.$inject=["WorkspaceService"]}(),function(){"use strict";function t(){function t(t){return"data:text/json;charset=utf-8,"+encodeURIComponent(t)}var e=this;e.exportSurvey=t}angular.module("editor.workspace").service("SurveyExportService",t)}(),function(){"use strict";function t(){function t(t,n){return new e(t,n)}var n=this;return n.create=t,n}function e(t,e){function n(t){u.push(t)}function i(t){var e=u.indexOf(t);u=u.slice(e,1)}function r(){return u}function o(t){Object.defineProperty(a,"lastSaveDateTime",{value:t,writable:!1})}var a=this;a.configuration={};var u=[];Object.defineProperty(this,"survey",{value:t,writable:!1}),Object.defineProperty(this,"creationDateTime",{value:Date.now(),writable:!1}),Object.defineProperty(this,"author",{value:e,writable:!1}),a.addContributor=n,a.removeContributor=i,a.listContributors=r,a.close=o}angular.module("editor.workspace").factory("SurveyProjectFactory",t)}(),function(){"use strict";angular.module("preview",[])}(),function(){"use strict";function t(t,e,n,i,r){function o(){e.isLoadingMode()?(e.setScope($scope),e.loadSurveyTemplate().then(function(r){i.startEditorWithSurveyTemplate(r),e.isLoading=!1,n.getSurvey().NavigationManager.loadJsonData(r.navigationList),t.goToEditor()})):r.sessionStorage.setItem("surveyTemplate_OID",n.getSurvey().oid)}var a=this;a.backToEditor=o}angular.module("preview").controller("PreviewMenuController",t),t.$inject=["DashboardStateService","EditionPreviewService","WorkspaceService","SurveyEditorService","$window"]}(),function(){"use strict";function t(t,e,n,i){function r(){if(c=t.template,c.itemContainer.length>0)return l.isLoading=!0,o()}function o(){var r=i.defer();return s.$$phase&&(e.create().load(c.itemContainer[0]),c.itemContainer.splice(0,1),c.itemContainer.length>0?n(function(){c.itemContainer.forEach(function(t){e.create().load(t),s.$digest()}),r.resolve(t.template)},1e3):r.resolve(t.template)),r.promise}function a(){return t.template}function u(t){s=t}var c,s,l=this;l.isLoading=!1,l.setScope=u,l.isLoadingMode=a,l.loadSurveyTemplate=r}angular.module("preview").service("EditionPreviewService",t),t.$inject=["$stateParams","AddSurveyItemEventFactory","$timeout","$q"]}();