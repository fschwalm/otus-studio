!function(){"use strict";function e(e,t,r){function n(){e.showDialog().onConfirm(function(e){r.startEditor(e),t.goToEditor()})}var a=this;a.startNewSurveyForm=n}angular.module("studio.dashboard").controller("SurveyFormDashboardController",e),e.$inject=["NewSurveyFormDialogService","DashboardStateService","SurveyEditorService"]}(),function(){"use strict";function e(e){function r(){l.dialogSettings={parent:angular.element(document.body),templateUrl:"app/dashboard/survey-templates/dialog/new-survey-form/new-survey-form-dialog.html",controller:t,controllerAs:"controller",openFrom:"#system-toolbar",closeTo:{bottom:0}}}function n(){return e.show(l.dialogSettings).then(a,o),{onConfirm:function(e){l.callback=e}}}function a(e){"create"==e.action&&l.callback&&l.callback(e.data)}function o(e){}var l=this;l.showDialog=n,r()}function t(e){function t(t){e.hide(t)}function r(t){e.hide(t)}var n=this;n.cancel=t,n.createSurveyForm=r}angular.module("studio.dashboard").service("NewSurveyFormDialogService",e),e.$inject=["$mdDialog"],t.$inject=["$mdDialog"]}(),function(){"use strict";angular.module("surveyTemplates",[])}(),function(){"use strict";function e(e,t){function r(){var t=e.getAllSurveyTemplatesByContributor();t.then(function(e){i.surveyTemplates=e})}function n(t){e.deleteSurveyTemplate(t.template_oid),s(t)}function a(e){return t.exportSurvey(JSON.stringify(e.template))}function o(e){}function l(e){return i.surveyTemplates.indexOf(e)}function s(e){i.surveyTemplates.splice(l(e),1)}var i=this;i.surveyTemplates=[],i.initializeSurveyTemplateList=r,i.deleteSurveyTemplate=n,i.exportSurveyTemplate=a,i.editSurveyTemplate=o}angular.module("surveyTemplates").service("SurveyTemplateManagerService",e),e.$inject=["CrossSessionDatabaseService","SurveyExportService"]}(),function(){"use strict";function e(){function e(e){o.selectedSurveyTemplates.push(e)}function t(e){o.selectedSurveyTemplates.splice(a(e),1)}function r(){return 0!==o.selectedSurveyTemplates.length}function n(){return 1===o.selectedSurveyTemplates.length}function a(e){return o.selectedSurveyTemplates.indexOf(e)}var o=this;o.selectedSurveyTemplates=[],o.selectSurveyTemplate=e,o.removeSurveyTemplate=t,o.hasSelectedSurveyTemplate=r,o.hasOnlyOneSelectedSurveyTemplate=n}angular.module("surveyTemplates").service("SelectedSurveyTemplatesManagementService",e)}(),function(){"use strict";function e(e,t,r){function n(){s.isSelected=!0,l.addClass("selected-template"),r.selectSurveyTemplate(s.surveyTemplate)}function a(){s.isSelected=!1,l.removeClass("selected-template"),r.removeSurveyTemplate(s.surveyTemplate)}function o(){t.$apply()}var l,s=this;s.isSelected=!1,s.$onDestroy=function(){s.isSelected&&r.removeSurveyTemplate(s.surveyTemplate)},e.on("click",function(){l=e.children(),s.isSelected?a():n(),o()})}angular.module("surveyTemplates").component("surveyTemplate",{templateUrl:"app/dashboard/survey-templates/components/survey-template/survey-template.html",controller:e,bindings:{surveyTemplate:"<"}}),e.$inject=["$element","$scope","SelectedSurveyTemplatesManagementService"]}(),function(){"use strict";function e(e){function t(){return e.surveyTemplates}var r=this;r.getSurveyTemplatesList=t,r.$onInit=function(){e.initializeSurveyTemplateList()}}angular.module("surveyTemplates").component("surveyTemplatesList",{templateUrl:"app/dashboard/survey-templates/components/survey-templates-list/survey-templates-list.html",controller:e}),e.$inject=["SurveyTemplateManagerService"]}(),function(){"use strict";function e(e,t,r,n,a,o){function l(){t.selectedSurveyTemplates.forEach(function(t){e.deleteSurveyTemplate(t)}),r.show(r.simple().textContent("Template(s) removido(s) com sucesso!"))}function s(){var e=i();a.sessionStorage.setItem("surveyTemplate_OID",e.oid),n.goToEditorWithSurveyTemplate(e)}function i(){return t.selectedSurveyTemplates[0].template}var u=this;u.SelectedSurveyTemplatesManagementService=t,u.deleteSelectedSurveyTemplate=l,u.openEditorForSelectedSurveyTemplate=s}angular.module("surveyTemplates").component("surveyTemplatesToolbar",{templateUrl:"app/dashboard/survey-templates/components/survey-templates-toolbar/survey-templates-toolbar-template.html",controller:e}),e.$inject=["SurveyTemplateManagerService","SelectedSurveyTemplatesManagementService","$mdToast","DashboardStateService","$window"]}(),function(){"use strict";function e(e,t,r){function n(n){var l=new FileReader;l.readAsText(n),l.onload=function(){o=l.result;var n=e.insertSurveyTemplate(o,{owner:"visitor"});n.then(function(e){e&&r.show(r.simple().textContent("Upload realizado com sucesso!"))},function(e){r.show(r.simple().textContent(a(e)))}),t.initializeSurveyTemplateList()}}function a(e){var t;switch(e){case"Key already exists in the object store.":t="Esse template jÃ¡ existe.";break;default:t="Ocorreu um erro ao realizar o upload"}return t}var o,l=this;l.upload=n}angular.module("surveyTemplates").service("SurveyTemplateUploadService",e),e.$inject=["CrossSessionDatabaseService","SurveyTemplateManagerService","$mdToast"]}(),function(){"use strict";function e(e){function t(t,r,n){function a(t){e.upload(t)}function o(){return l=document.createElement("input"),l.setAttribute("type","file"),l.setAttribute("accept",".json"),l}var l;r.on("click",function(){l=o(),l.click(),l.addEventListener("change",function(){var e=this.files[0];a(e)})})}var r={restrict:"A",link:t};return r}angular.module("surveyTemplates").directive("surveyTemplateUpload",e),e.$inject=["SurveyTemplateUploadService"]}(),function(){"use strict";function e(e,t,r,n){var a={restrict:"A",link:function(a,o){o.on("click",function(){n.selectedSurveyTemplates.forEach(function(t){var r=document.createElement("a");r.setAttribute("href",e.exportSurveyTemplate(t)),r.setAttribute("download","surveyTemplate.json"),r.setAttribute("target","_blank"),r.click()}),r(function(){t.show(t.simple().textContent("Template(s) exportado(s) com sucesso!"))},1e3)})}};return a}angular.module("surveyTemplates").directive("surveyTemplatesExport",e),e.$inject=["SurveyTemplateManagerService","$mdToast","$timeout","SelectedSurveyTemplatesManagementService"]}();