!function(){"use strict";angular.module("studio.dashboard",[])}(),function(){"use strict";function e(e,t,o){function n(){m.currentState="Home"}function r(){m.currentState="Login",e.go(o.LOGIN)}function a(){m.currentState="Home",e.go(o.HOME)}function i(){m.currentState="SurveyTemplates",e.go(o.SURVEY_TEMPLATES)}function l(){m.currentState="Edição de Formulário",e.go(o.EDITOR)}function u(){m.currentState="Preview de Formulário",e.go(o.PREVIEW)}function s(t){m.currentState="Edição de Formulário",e.go(o.EDITOR,{template:t})}function c(){r()}var m=this;m.goToLogin=r,m.goToHome=a,m.goToFormTemplates=i,m.goToEditor=l,m.goToPreview=u,m.logout=c,m.goToEditorWithSurveyTemplate=s,n()}angular.module("studio.dashboard").service("DashboardStateService",e),e.$inject=["$state","$http","APP_STATE"]}(),function(){"use strict";function e(e){function o(){i.dialogSettings={parent:angular.element(document.body),templateUrl:"app/dashboard/dialog/logout/logout-dialog.html",controller:t,controllerAs:"controller",openFrom:"#system-toolbar",closeTo:{bottom:0}}}function n(){return e.show(i.dialogSettings).then(r,a),{onConfirm:function(e){i.callback=e}}}function r(e){"confirm"==e.action&&i.callback&&i.callback(e.data)}function a(){}var i=this;i.showDialog=n,o()}function t(e){function t(t){e.hide(t)}function o(t){e.hide(t)}var n=this;n.cancel=t,n.confirm=o}angular.module("studio.dashboard").service("LogoutDialogService",e),e.$inject=["$mdDialog"]}(),function(){"use strict";function e(){var e={templateUrl:"app/dashboard/menu/toolbar/menu-toolbar.html",retrict:"E"};return e}angular.module("studio.dashboard").directive("otusToolbar",e)}(),function(){"use strict";function e(e,t,o){function n(){return e.currentState}function r(){t("left").toggle()}function a(){t("left").close()}function i(){e.goToHome(),a()}function l(){e.goToFormTemplates(),a()}function u(){o.logout()}var s=this;s.getSelectedSystemArea=n,s.open=r,s.close=a,s.openHome=i,s.openFormTemplates=l,s.logout=u}angular.module("studio.dashboard").controller("DashboardMenuController",e),e.$inject=["DashboardStateService","$mdSidenav","AuthenticationService"]}(),function(){"use strict";function e(e,t,o){function n(){e.showDialog().onConfirm(function(e){o.startEditor(e),t.goToEditor()})}var r=this;r.startNewSurveyForm=n}angular.module("studio.dashboard").controller("SurveyFormDashboardController",e),e.$inject=["NewSurveyFormDialogService","DashboardStateService","SurveyEditorService"]}(),function(){"use strict";function e(e){function o(){i.dialogSettings={parent:angular.element(document.body),templateUrl:"app/dashboard/survey-templates/dialog/new-survey-form/new-survey-form-dialog.html",controller:t,controllerAs:"controller",openFrom:"#system-toolbar",closeTo:{bottom:0}}}function n(){return e.show(i.dialogSettings).then(r,a),{onConfirm:function(e){i.callback=e}}}function r(e){"create"==e.action&&i.callback&&i.callback(e.data)}function a(e){}var i=this;i.showDialog=n,o()}function t(e){function t(t){e.hide(t)}function o(t){e.hide(t)}var n=this;n.cancel=t,n.createSurveyForm=o}angular.module("studio.dashboard").service("NewSurveyFormDialogService",e),e.$inject=["$mdDialog"],t.$inject=["$mdDialog"]}(),function(){"use strict";angular.module("surveyTemplates",[])}(),function(){"use strict";function e(e,t){function o(){var t=e.getAllSurveyTemplatesByContributor();t.then(function(e){u.surveyTemplates=e})}function n(t){e.deleteSurveyTemplate(t.template_oid),l(t)}function r(e){return t.exportSurvey(JSON.stringify(e.template))}function a(e){}function i(e){return u.surveyTemplates.indexOf(e)}function l(e){u.surveyTemplates.splice(i(e),1)}var u=this;u.surveyTemplates=[],u.initializeSurveyTemplateList=o,u.deleteSurveyTemplate=n,u.exportSurveyTemplate=r,u.editSurveyTemplate=a}angular.module("surveyTemplates").service("SurveyTemplateManagerService",e),e.$inject=["CrossSessionDatabaseService","SurveyExportService"]}(),function(){"use strict";function e(){function e(e){a.selectedSurveyTemplates.push(e)}function t(e){a.selectedSurveyTemplates.splice(r(e),1)}function o(){return 0!==a.selectedSurveyTemplates.length}function n(){return 1===a.selectedSurveyTemplates.length}function r(e){return a.selectedSurveyTemplates.indexOf(e)}var a=this;a.selectedSurveyTemplates=[],a.selectSurveyTemplate=e,a.removeSurveyTemplate=t,a.hasSelectedSurveyTemplate=o,a.hasOnlyOneSelectedSurveyTemplate=n}angular.module("surveyTemplates").service("SelectedSurveyTemplatesManagementService",e)}(),function(){"use strict";function e(e,t,o){function n(){l.isSelected=!0,i.addClass("selected-template"),o.selectSurveyTemplate(l.surveyTemplate)}function r(){l.isSelected=!1,i.removeClass("selected-template"),o.removeSurveyTemplate(l.surveyTemplate)}function a(){t.$apply()}var i,l=this;l.isSelected=!1,l.$onDestroy=function(){l.isSelected&&o.removeSurveyTemplate(l.surveyTemplate)},e.on("click",function(){i=e.children(),l.isSelected?r():n(),a()})}angular.module("surveyTemplates").component("surveyTemplate",{templateUrl:"app/dashboard/survey-templates/components/survey-template/survey-template.html",controller:e,bindings:{surveyTemplate:"<"}}),e.$inject=["$element","$scope","SelectedSurveyTemplatesManagementService"]}(),function(){"use strict";function e(e){function t(){return e.surveyTemplates}var o=this;o.getSurveyTemplatesList=t,o.$onInit=function(){e.initializeSurveyTemplateList()}}angular.module("surveyTemplates").component("surveyTemplatesList",{templateUrl:"app/dashboard/survey-templates/components/survey-templates-list/survey-templates-list.html",controller:e}),e.$inject=["SurveyTemplateManagerService"]}(),function(){"use strict";function e(e,t,o,n,r,a){function i(){t.selectedSurveyTemplates.forEach(function(t){e.deleteSurveyTemplate(t)}),o.show(o.simple().textContent("Template(s) removido(s) com sucesso!"))}function l(){var e=u();r.sessionStorage.setItem("surveyTemplate_OID",e.oid),n.goToEditorWithSurveyTemplate(e)}function u(){return t.selectedSurveyTemplates[0].template}var s=this;s.SelectedSurveyTemplatesManagementService=t,s.deleteSelectedSurveyTemplate=i,s.openEditorForSelectedSurveyTemplate=l}angular.module("surveyTemplates").component("surveyTemplatesToolbar",{templateUrl:"app/dashboard/survey-templates/components/survey-templates-toolbar/survey-templates-toolbar-template.html",controller:e}),e.$inject=["SurveyTemplateManagerService","SelectedSurveyTemplatesManagementService","$mdToast","DashboardStateService","$window"]}(),function(){"use strict";function e(e,t,o){function n(n){var i=new FileReader;i.readAsText(n),i.onload=function(){a=i.result;var n=e.insertSurveyTemplate(a,{owner:"visitor"});n.then(function(e){e&&o.show(o.simple().textContent("Upload realizado com sucesso!"))},function(e){o.show(o.simple().textContent(r(e)))}),t.initializeSurveyTemplateList()}}function r(e){var t;switch(e){case"Key already exists in the object store.":t="Esse template já existe.";break;default:t="Ocorreu um erro ao realizar o upload"}return t}var a,i=this;i.upload=n}angular.module("surveyTemplates").service("SurveyTemplateUploadService",e),e.$inject=["CrossSessionDatabaseService","SurveyTemplateManagerService","$mdToast"]}(),function(){"use strict";function e(e){function t(t,o,n){function r(t){e.upload(t)}function a(){return i=document.createElement("input"),i.setAttribute("type","file"),i.setAttribute("accept",".json"),i}var i;o.on("click",function(){i=a(),i.click(),i.addEventListener("change",function(){var e=this.files[0];r(e)})})}var o={restrict:"A",link:t};return o}angular.module("surveyTemplates").directive("surveyTemplateUpload",e),e.$inject=["SurveyTemplateUploadService"]}(),function(){"use strict";function e(e,t,o,n){var r={restrict:"A",link:function(r,a){a.on("click",function(){n.selectedSurveyTemplates.forEach(function(t){var o=document.createElement("a");o.setAttribute("href",e.exportSurveyTemplate(t)),o.setAttribute("download","surveyTemplate.json"),o.setAttribute("target","_blank"),o.click()}),o(function(){t.show(t.simple().textContent("Template(s) exportado(s) com sucesso!"))},1e3)})}};return r}angular.module("surveyTemplates").directive("surveyTemplatesExport",e),e.$inject=["SurveyTemplateManagerService","$mdToast","$timeout","SelectedSurveyTemplatesManagementService"]}();